1
--CREATE TABLE <data_type> (
--<column_name><data_type><constraint>)

CREATE TABLE author(
	id SERiAL PRIMARY KEY,
	first_name VARCHAR(50) NOT NULL,
	last_name VARCHAR (50) NOT NULL,
	email VARCHAR(100),
	birhday DATE
);

INSERT INTO author(first_name,last_name,email,birhday)
values ('Haruki','Maruki','haruk@ali.comi','1946-6-2'),
('Halide','edip','haruk@ali.comi','1946-6-2'),
('sabahattin','Ali','haruk@ali.comi','1946-6-2'),
('Resat','Nuri','haruk@ali.comi','1946-6-2');
select * FROM author

-- author tablosundan author2 tablosuna veri kopyalama
CREATE table author2 AS
SELECT *FROM author
WHERE first_name = 'Sabahattin';


--author3 tablosu olusturup veri kopyalayalım
CREATE TABLE author3 AS
SELECT * FROM author;
--ne var bakalım
SELECT * FROM author3;
--3. tablo olusturuldu ve 1. tablo kopyalandı.

--Tablo silme
DROP TABLE author;
--hata mesajı almamak icin 
DROP TABLE IF EXIST author;

--19 VERİLERİ GÜNCELLEMEK - SİLMEK
GENERATE DUMMY SERVİCE ARA GOOGLE---> MOCKAROO -- otomatik veri getirir.

--- veri güncelleme
UPDATE <table_name>
SET column1 = value1,
    column2 = value2,
    ......
    WHERE condition;

--örnek  
UPDATE author
SET first_name = 'caglar'
    last_name = 'aral',
    email = 'caglar@hotmail.com'
    birthday = '1994-04-10'
WHERE id = 10;  --id'si 10 olan satırdaki veriler değişti.

--v ile başlayanları değiştiriyor, sadece firstname ve lastname değişcek
UPDATE author
SET first_name = 'xxxx'
    last_name = 'yyyy',
WHERE first_name LIKE 'V%';


--örnek firstname odetta olanın lastname'i update olarak güncellendi
UPDATE author
SET last_name = 'UPDATE'
WHERE first_name ='Odetta'
RETURNING *;

--SİLME, İD'Sİ 6 OLAN ELEMAN SİLİNDİ, DİĞER VERİLERDE İD DEĞİŞİKLİĞİ OLMAZ
DELETE author
WHERE id = 6; VEYA WHERE id > 11
RETURNİNG *; -- VERİLERİ GERİ DÖNECEK

--23 NOT NULL ve ALTER
CREATE TABLE users (
    id SERİAL PRIMARY KEY,
    username VARCHAR(20),
    email VARCHAR(50),
    AGE INTEGER
);  ------TABLO OLUSTURDU

---VERİ GİRELİM TABLOMUZA
INSERT INTO users(username, email, age)
VALUES
	('tester', 'fgfk@gmail', 23);
sonra 
SELECT * FROM users; 
ile tablomuzu görüyoruz.

user name NULL olamaz. eksik veri olmamalı yani. tablo onceden olusturulmussa ot null'a çevirmek icin

ALTER TABLE users
ALTER COLUMN username
SET NOT NULL;

bunu yapabilmek icin null ifade olmamalı. user namede null varsa aşagıdaki gibi sileriz.

DELETE FROM users
WHERE username IS NULL
RETURNING *;  --SİLİNEN SATIRI GÖSTERCEK

--BOS BİR STRİNG NULL DEĞİLDİR. ('')

--24 UNIQUE
UNIQUE kısıtlaması ile uyguladığımız sütundaki verilerin birbirlerinden farklı benzersiz olmalarını isteriz. 
PRIMARY KEY kısıtlaması kendiliğinden UNIQUE kısıtlamasına sahiptir.
NOT NULL kısıtlamasında olduğu gibi tablo oluştururken veya ALTER komutu ile 
beraber tablo oluştuktan sonra da kullanabiliriz.

UNIQUE Kullanımı
Employees şeklinde bir tablomuzu oluşturalım. 
Tablodaki email sütununda bulunan verileri UNIQUE olarak belirlemek istersek.

CREATE TABLE Employees (
    ---
    emaile VARCHAR(100) UNIQUE,
    ----
);

ALTER ve UNIQUE
ALTER TABLE <tablo_adı>
ADD UNIQUE <sütun_adı>

Bu arada herhangi bir sütuna UNIQUE kısıtlaması getirirsek ve öncesinde UNIQUE olmayan verileri kaldrmamız gerekir.

--örnek
ALTER TABLE users
ADD UNIQUE (email);

25-CHECK
CHECK kısıtlaması ile uyguladığımız sütundaki verilere belirli koşullar verebiliriz. 
Örneğin age (yaş) olarak belirlediğimiz bir sütuna negatif değerler verebiliriz veya 
web portaline üye olan kullanıcıların yaşlarının 18 yaşından büyük olması gibi 
kendi senaryolarımıza uygun başka kıstlamalar da vermek isteyebiliriz.

CHECK kısıtlamasını da tablo oluştururken veya ALTER komutu ile beraber tablo oluştuktan sonra kullanabiliriz.

CHECK Kullanımı
Employees şeklinde bir tablomuzu oluşturalım. 
Tablodaki age sütununda bulunan verilerin 18'e eşit veya büyük olmasını istiyoruz.

CREATE TABLE Employees (
    ---
    age INTEGER CHECK (age>=18)
    ----
);
ALTER ve CHECK
ALTER TABLE <tablo_adı>
ADD CHECK (age>=18)
 
--örnek
INSERT INTO users(username, email, age)
VALUES 
 	('gamer4', 'fgfk@gmail', -23);
	
check ile age'e kısıtlama ekleyecegiz

ALTER TABLE users
ADD CHECK (age>18); --tabloda uymayan degerler varsa hata verir. bu durumda silelim uymayanı

DELETE FROM users
WHERE id = 11; --silmiş olduk 11deki elemanı

--id atanan 2 nolu eleman silinrse yeni eleman id si 3 olur 2 olmaz
